Don't use button to inspect current selection. 
Update it automatically when selection changes. 
If it's a small utility, not batch operation.

Use preview before applying batch changes.

If I have selection, most probably scope is limited to selection.
If I don't have selection, most probably scope is whole page.