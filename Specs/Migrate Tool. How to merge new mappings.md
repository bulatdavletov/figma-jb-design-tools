# Migrate Tool — How to merge new mappings

## Export from Library Swap (Manual pairs)

1. In **Library Swap** tool, open the **Manual pairs** section.
2. Choose export target with the segmented button: **UI Kit** or **Icons**.
3. Record pairs (Capture Old / Capture New), then click **Export mapping**.
4. Save the file (or move it) into the **mapping inbox** folder:
   ```
   /Users/Bulat.Davletov/Cursor Projects/Figma JSONs/mapping inbox
   ```

**File names** (generated by the plugin):
- **UI Kit** selected → `uikit-mapping-DD.MM.YYYY-HH-MM.json`
- **Icons** selected → `icons-mapping-DD.MM.YYYY-HH-MM.json`

The merge script uses these prefixes to know where to merge each file.

---

## Merge script (inbox → built-in defaults)

The script always reads from the fixed inbox folder and merges all matching files.

1. Put exported JSONs in the inbox folder (see path above). Only these names are processed:
   - `uikit-mapping-*.json` → merged into default UI Kit mapping
   - `icons-mapping-*.json` → merged into default Icons mapping  
   Other `.json` files in the folder are skipped.

2. From the plugin repo, run (no arguments):
   ```bash
   cd "/Users/Bulat.Davletov/Cursor Projects/figma-jb-variables-utilities"
   node scripts/merge-mapping.cjs
   ```

3. The script will:
   - List and process each `uikit-mapping-*.json` and `icons-mapping-*.json` in the inbox
   - Merge each file into the corresponding built-in mapping
   - **Delete** each file after a successful merge
   - Print a short summary

4. Rebuild the plugin:
   ```bash
   npm run build
   ```

---

## Summary

| Step | Where | Action |
|------|--------|--------|
| Export | Library Swap → Manual pairs | Choose **UI Kit** or **Icons**, export mapping → save to inbox folder |
| Inbox | `Figma JSONs/mapping inbox` | Drop `uikit-mapping-*.json` and/or `icons-mapping-*.json` |
| Merge | Terminal (plugin repo) | `node scripts/merge-mapping.cjs` (no args) |
| Rebuild | Terminal | `npm run build` |
